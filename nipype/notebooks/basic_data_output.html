
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Output &#8212; MRI analysis in Python using Nipype, Nilearn and more</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using Nipype Plugins" href="basic_plugins.html" />
    <link rel="prev" title="Data input for BIDS datasets" href="basic_data_input_bids.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/nipy_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">MRI analysis in Python using Nipype, Nilearn and more</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../index.html">
   Welcome!
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../dei.html">
   Diversity, Equity and Inclusion
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../overview.html">
   Workshop overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../setup.html">
   Setup for the workshop
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../outline.html">
   Outline
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../prerequisites.html">
   Course prerequisites
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../prerequisites/intro_to_shell.html">
     Introduction to the (unix) command line: bash
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../prerequisites/intro_to_git_and_github.html">
     Introduction to git and github
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../prerequisites/intro_jupyter.html">
     Introduction to the jupyter ecosystem &amp; notebooks
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../prerequisites/intro_python.html">
     Introduction to Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../prerequisites/python_numpy.html">
     Introduction to NumPy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../prerequisites/python_scipy.html">
     Introduction to SciPy
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../prerequisites/python_visualization.html">
     Introduction to Visualization in python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../prerequisites/intro_statistics.html">
     Introduction to Statistics in python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../prerequisites/python_scikit.html">
     Introduction to scikit-learn &amp; scikit-image
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../data/data.html">
   Basics in data handling
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../data/image_manipulation_nibabel.html">
     Using Python for neuroimaging data - NiBabel
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../data/image_manipulation_nilearn.html">
     Using Python for neuroimaging data - Nilearn
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="../nipype_overview.html">
   Nipype
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../nipype_intro.html">
     Introduction to Nipype
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="introduction_showcase.html">
       Nipype Showcase
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="introduction_quickstart.html">
       Nipype Quickstart
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="introduction_quickstart_non-neuroimaging.html">
       Nipype Quickstart - non-imaging
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="introduction_dataset.html">
       Tutorial Dataset
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="../nipype_basics.html">
     Basic concepts
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
    <label for="toctree-checkbox-5">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="basic_interfaces.html">
       Interfaces
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_nodes.html">
       Nodes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_workflow.html">
       Workflows
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_graph_visualization.html">
       Graph Visualization
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_data_input.html">
       Data Input
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_data_input_bids.html">
       Data input for BIDS datasets
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Data Output
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_plugins.html">
       Using Nipype Plugins
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_function_interface.html">
       Function Interface
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_iteration.html">
       Iterables
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_mapnodes.html">
       MapNode
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_joinnodes.html">
       JoinNode, synchronize and itersource
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_debug.html">
       Debugging Nipype Workflows
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="basic_execution_configuration.html">
       Execution Configuration Options
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../nipype_examples.html">
     Example workflows
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="example_preprocessing.html">
       Example 1: Preprocessing Workflow
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="example_1stlevel.html">
       Example 2: 1st-level Analysis
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="example_normalize.html">
       Example 3: Normalize data to MNI template
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="example_2ndlevel.html">
       Example 4: 2nd-level Analysis
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="handson_preprocessing.html">
       Hands-on 1: How to create a fMRI preprocessing workflow
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="handson_analysis.html">
       Hands-on 2: How to create a fMRI analysis workflow
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../nipype_advanced.html">
     Advanced concepts
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="advanced_create_interfaces.html">
       Create interfaces
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="advanced_interfaces_caching.html">
       Interface caching
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="advanced_nipypecli.html">
       Nipype Command Line Interface
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="advanced_aws.html">
       Using Nipype with Amazon Web Services (AWS)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="advanced_sphinx_ext.html">
       Sphinx extensions
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="advanced_spmmcr.html">
       Using SPM with MATLAB Common Runtime (MCR)
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="advanced_mipav.html">
       Using MIPAV, JIST, and CBS Tools
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../nipype_resources.html">
     Resources
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
    <label for="toctree-checkbox-8">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="resources_installation.html">
       Download and install
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="resources_help.html">
       Where to find help
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../advanced.html">
   Advanced and specialized analyses
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../advanced/pybids.html">
     Introduction to
     <code class="docutils literal notranslate">
      <span class="pre">
       pybids
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../advanced/statistical_analyses_MRI.html">
     Nilearn GLM: statistical analyses of MRI in Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../advanced/functional_connectivity.html">
     Functional connectivity and resting state
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../advanced/machine_learning_preparation.html">
     Preparation Machine Learning
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../advanced/machine_learning_nilearn.html">
     MVPA and Searchlight with
     <code class="docutils literal notranslate">
      <span class="pre">
       nilearn
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../advanced/machine_learning_keras.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       TensorFlow
      </span>
     </code>
     /
     <code class="docutils literal notranslate">
      <span class="pre">
       Keras
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../advanced/Predicting_age_with_machine_learning.html">
     Machine learning to predict age from rs-fmri
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../advanced/diffusion_imaging.html">
     Structural connectivity and diffusion imaging
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../break.html">
   Yoga and/or dance break
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../CoC.html">
   Code of Conduct
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/nipype/notebooks/basic_data_output.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/PeerHerholz/workshop_weizmann"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/PeerHerholz/workshop_weizmann/issues/new?title=Issue%20on%20page%20%2Fnipype/notebooks/basic_data_output.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/PeerHerholz/workshop_weizmann/edit/main/workshop/nipype/notebooks/basic_data_output.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/PeerHerholz/workshop_weizmann/main?urlpath=tree/workshop/nipype/notebooks/basic_data_output.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Data Output
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#datasink">
   DataSink
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mapnode">
     MapNode
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#parameterization">
     Parameterization
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#substitutions">
     Substitutions
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#realistic-example">
   Realistic Example
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#preparation">
     Preparation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#how-to-use-datasink">
     How to use
     <code class="docutils literal notranslate">
      <span class="pre">
       DataSink
      </span>
     </code>
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#exercise-1">
       Exercise 1
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="data-output">
<h1>Data Output<a class="headerlink" href="#data-output" title="Permalink to this headline">¶</a></h1>
<p>Similarly important to data input is data output. Using a data output module allows you to restructure and rename computed output and to spatially differentiate relevant output files from the temporary computed intermediate files in the working directory. Nipype provides the following modules to handle data stream output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>DataSink
JSONFileSink
MySQLSink
SQLiteSink
XNATSink
</pre></div>
</div>
<p>This tutorial covers only <code class="docutils literal notranslate"><span class="pre">DataSink</span></code>. For the rest, see the section <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html"><code class="docutils literal notranslate"><span class="pre">interfaces.io</span></code></a> on the official homepage.</p>
</div>
<div class="section" id="datasink">
<h1>DataSink<a class="headerlink" href="#datasink" title="Permalink to this headline">¶</a></h1>
<p>A workflow working directory is like a <strong>cache</strong>. It contains not only the outputs of various processing stages, it also contains various extraneous information such as execution reports, hashfiles determining the input state of processes. All of this is embedded in a hierarchical structure that reflects the iterables that have been used in the workflow. This makes navigating the working directory a not so pleasant experience. And typically the user is interested in preserving only a small percentage of these outputs. The <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#datasink">DataSink</a> interface can be used to extract components from this <code class="docutils literal notranslate"><span class="pre">cache</span></code> and store it at a different location. For XNAT-based storage, see <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#nipype-interfaces-io-xnatsink">XNATSink</a>.</p>
<div class="alert alert-info">
Unlike other interfaces, a [DataSink](http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#datasink)'s inputs are defined and created by using the workflow connect statement. Currently disconnecting an input from the [DataSink](http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#datasink) does not remove that connection port.
</div>
<p>Let’s assume we have the following workflow.</p>
<img src="../static/images/datasink_flow.png" width="160">
<p>The following code segment defines the <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#datasink">DataSink</a> node and sets the <code class="docutils literal notranslate"><span class="pre">base_directory</span></code> in which all outputs will be stored. The <code class="docutils literal notranslate"><span class="pre">container</span></code> input creates a subdirectory within the <code class="docutils literal notranslate"><span class="pre">base_directory</span></code>. If you are iterating a workflow over subjects, it may be useful to save it within a folder with the subject id.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">datasink</span> <span class="o">=</span> <span class="n">pe</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="n">nio</span><span class="o">.</span><span class="n">DataSink</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sinker&#39;</span><span class="p">)</span>
<span class="n">datasink</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_directory</span> <span class="o">=</span> <span class="s1">&#39;/path/to/output&#39;</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">inputnode</span><span class="p">,</span> <span class="s1">&#39;subject_id&#39;</span><span class="p">,</span> <span class="n">datasink</span><span class="p">,</span> <span class="s1">&#39;container&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If we wanted to save the realigned files and the realignment parameters to the same place the most intuitive option would be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">realigner</span><span class="p">,</span> <span class="s1">&#39;realigned_files&#39;</span><span class="p">,</span> <span class="n">datasink</span><span class="p">,</span> <span class="s1">&#39;motion&#39;</span><span class="p">)</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">realigner</span><span class="p">,</span> <span class="s1">&#39;realignment_parameters&#39;</span><span class="p">,</span> <span class="n">datasink</span><span class="p">,</span> <span class="s1">&#39;motion&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>However, this will not work as only one connection is allowed per input port. So we need to create a second port. We can store the files in a separate folder.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">realigner</span><span class="p">,</span> <span class="s1">&#39;realigned_files&#39;</span><span class="p">,</span> <span class="n">datasink</span><span class="p">,</span> <span class="s1">&#39;motion&#39;</span><span class="p">)</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">realigner</span><span class="p">,</span> <span class="s1">&#39;realignment_parameters&#39;</span><span class="p">,</span> <span class="n">datasink</span><span class="p">,</span> <span class="s1">&#39;motion.par&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The period (.) indicates that a subfolder called par should be created. But if we wanted to store it in the same folder as the realigned files, we would use the <code class="docutils literal notranslate"><span class="pre">.&#64;</span></code> syntax. The &#64; tells the <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#datasink">DataSink</a> interface to not create the subfolder. This will allow us to create different named input ports for <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#datasink">DataSink</a> and allow the user to store the files in the same folder.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">workflow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">realigner</span><span class="p">,</span> <span class="s1">&#39;realigned_files&#39;</span><span class="p">,</span> <span class="n">datasink</span><span class="p">,</span> <span class="s1">&#39;motion&#39;</span><span class="p">)</span>
<span class="n">workflow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">realigner</span><span class="p">,</span> <span class="s1">&#39;realignment_parameters&#39;</span><span class="p">,</span> <span class="n">datasink</span><span class="p">,</span> <span class="s1">&#39;motion.@par&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The syntax for the input port of <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#datasink">DataSink</a> takes the following form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>string[[.[@]]string[[.[@]]string] ...]
where parts between paired [] are optional.
</pre></div>
</div>
<div class="section" id="mapnode">
<h2>MapNode<a class="headerlink" href="#mapnode" title="Permalink to this headline">¶</a></h2>
<p>In order to use <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#datasink">DataSink</a> inside a MapNode, its inputs have to be defined inside the constructor using the <code class="docutils literal notranslate"><span class="pre">infields</span></code> keyword arg.</p>
</div>
<div class="section" id="parameterization">
<h2>Parameterization<a class="headerlink" href="#parameterization" title="Permalink to this headline">¶</a></h2>
<p>As discussed in <a class="reference internal" href="basic_iteration.html"><span class="doc std std-doc">Iterables</span></a>, one can run a workflow iterating over various inputs using the iterables attribute of nodes. This means that a given workflow can have multiple outputs depending on how many iterables are there. Iterables create working directory subfolders such as <code class="docutils literal notranslate"><span class="pre">_iterable_name_value</span></code>.  The <code class="docutils literal notranslate"><span class="pre">parameterization</span></code> input parameter controls whether the data stored using <a class="reference external" href="http://nipype.readthedocs.io/en/latest/interfaces/generated/nipype.interfaces.io.html#datasink">DataSink</a> is in a folder structure that contains this iterable information or not. It is generally recommended to set this to <code class="docutils literal notranslate"><span class="pre">True</span></code> when using multiple nested iterables.</p>
</div>
<div class="section" id="substitutions">
<h2>Substitutions<a class="headerlink" href="#substitutions" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">substitutions</span></code> and <code class="docutils literal notranslate"><span class="pre">regexp_substitutions</span></code> inputs allow users to modify the output destination path and name of a file. Substitutions are a list of 2-tuples and are carried out in the order in which they were entered. Assuming that the output path of a file is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/root/container/_variable_1/file_subject_realigned.nii
</pre></div>
</div>
<p>we can use substitutions to clean up the output path.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">datasink</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">substitutions</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;_variable&#39;</span><span class="p">,</span> <span class="s1">&#39;variable&#39;</span><span class="p">),</span>
                                 <span class="p">(</span><span class="s1">&#39;file_subject_&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)]</span>
</pre></div>
</div>
<p>This will rewrite the file as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/root/container/variable_1/realigned.nii
</pre></div>
</div>
<div class="alert alert-info">
<b>Note</b>: In order to figure out which substitutions are needed it is often useful to run the workflow on a limited set of iterables and then determine the substitutions.
</div></div>
</div>
<div class="section" id="realistic-example">
<h1>Realistic Example<a class="headerlink" href="#realistic-example" title="Permalink to this headline">¶</a></h1>
<div class="section" id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline">¶</a></h2>
<p>Before we can use <code class="docutils literal notranslate"><span class="pre">DataSink</span></code> we first need to run a workflow. For this purpose, let’s create a very short preprocessing workflow that realigns and smooths one functional image of one subject.</p>
<p>First, let’s create a <code class="docutils literal notranslate"><span class="pre">SelectFiles</span></code> node. For an explanation of this step, see the <a class="reference internal" href="basic_data_input.html"><span class="doc std std-doc">Data Input</span></a> tutorial.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nipype</span> <span class="kn">import</span> <span class="n">SelectFiles</span><span class="p">,</span> <span class="n">Node</span>

<span class="c1"># Create SelectFiles node</span>
<span class="n">templates</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;func&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{subject}</span><span class="s1">/</span><span class="si">{session}</span><span class="s1">/func/</span><span class="si">{subject}</span><span class="s1">_</span><span class="si">{session}</span><span class="s1">_task-fingerfootlips_bold.nii.gz&#39;</span><span class="p">}</span>
<span class="n">sf</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">SelectFiles</span><span class="p">(</span><span class="n">templates</span><span class="p">),</span>
          <span class="n">name</span><span class="o">=</span><span class="s1">&#39;selectfiles&#39;</span><span class="p">)</span>
<span class="n">sf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_directory</span> <span class="o">=</span> <span class="s1">&#39;/data/ds000114&#39;</span>
<span class="n">sf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s1">&#39;sub-01&#39;</span>
<span class="n">sf</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">session</span> <span class="o">=</span> <span class="s1">&#39;ses-test&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Second, let’s create the motion correction and smoothing node. For an explanation about this step, see the <a class="reference internal" href="basic_nodes.html"><span class="doc std std-doc">Nodes</span></a> and <a class="reference internal" href="basic_interfaces.html"><span class="doc std std-doc">Interfaces</span></a> tutorial.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nipype.interfaces.fsl</span> <span class="kn">import</span> <span class="n">MCFLIRT</span><span class="p">,</span> <span class="n">IsotropicSmooth</span>

<span class="c1"># Create Motion Correction Node</span>
<span class="n">mcflirt</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">MCFLIRT</span><span class="p">(</span><span class="n">mean_vol</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                       <span class="n">save_plots</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
               <span class="n">name</span><span class="o">=</span><span class="s1">&#39;mcflirt&#39;</span><span class="p">)</span>

<span class="c1"># Create Smoothing node</span>
<span class="n">smooth</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">IsotropicSmooth</span><span class="p">(</span><span class="n">fwhm</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
              <span class="n">name</span><span class="o">=</span><span class="s1">&#39;smooth&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Third, let’s create the workflow that will contain those three nodes. For an explanation about this step, see the <a class="reference internal" href="basic_workflow.html"><span class="doc std std-doc">Workflow</span></a> tutorial.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nipype</span> <span class="kn">import</span> <span class="n">Workflow</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">abspath</span>

<span class="c1"># Create a preprocessing workflow</span>
<span class="n">wf</span> <span class="o">=</span> <span class="n">Workflow</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;preprocWF&quot;</span><span class="p">)</span>
<span class="n">wf</span><span class="o">.</span><span class="n">base_dir</span> <span class="o">=</span> <span class="s1">&#39;/output/working_dir&#39;</span>

<span class="c1"># Connect the three nodes to each other</span>
<span class="n">wf</span><span class="o">.</span><span class="n">connect</span><span class="p">([(</span><span class="n">sf</span><span class="p">,</span> <span class="n">mcflirt</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;func&quot;</span><span class="p">,</span> <span class="s2">&quot;in_file&quot;</span><span class="p">)]),</span>
            <span class="p">(</span><span class="n">mcflirt</span><span class="p">,</span> <span class="n">smooth</span><span class="p">,</span> <span class="p">[(</span><span class="s2">&quot;out_file&quot;</span><span class="p">,</span> <span class="s2">&quot;in_file&quot;</span><span class="p">)])])</span>
</pre></div>
</div>
</div>
</div>
<p>Now that everything is set up, let’s run the preprocessing workflow.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>211017-17:06:28,711 nipype.workflow INFO:
	 Workflow preprocWF settings: [&#39;check&#39;, &#39;execution&#39;, &#39;logging&#39;, &#39;monitoring&#39;]
211017-17:06:28,720 nipype.workflow INFO:
	 Running serially.
211017-17:06:28,721 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.selectfiles&quot; in &quot;/output/working_dir/preprocWF/selectfiles&quot;.
211017-17:06:28,726 nipype.workflow INFO:
	 [Node] Running &quot;selectfiles&quot; (&quot;nipype.interfaces.io.SelectFiles&quot;)
211017-17:06:28,736 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.selectfiles&quot;.
211017-17:06:28,738 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.mcflirt&quot; in &quot;/output/working_dir/preprocWF/mcflirt&quot;.
211017-17:06:28,747 nipype.workflow INFO:
	 [Node] Running &quot;mcflirt&quot; (&quot;nipype.interfaces.fsl.preprocess.MCFLIRT&quot;), a CommandLine Interface with command:
mcflirt -in /data/ds000114/sub-01/ses-test/func/sub-01_ses-test_task-fingerfootlips_bold.nii.gz -meanvol -out /output/working_dir/preprocWF/mcflirt/sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz -plots
211017-17:07:39,568 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.mcflirt&quot;.
211017-17:07:39,571 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.smooth&quot; in &quot;/output/working_dir/preprocWF/smooth&quot;.
211017-17:07:39,583 nipype.workflow INFO:
	 [Node] Running &quot;smooth&quot; (&quot;nipype.interfaces.fsl.maths.IsotropicSmooth&quot;), a CommandLine Interface with command:
fslmaths /output/working_dir/preprocWF/mcflirt/sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz -s 1.69864 /output/working_dir/preprocWF/smooth/sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz
211017-17:07:51,189 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.smooth&quot;.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;networkx.classes.digraph.DiGraph at 0x7f6f6efd7b90&gt;
</pre></div>
</div>
</div>
</div>
<p>After the execution of the workflow we have all the data hidden in the working directory <code class="docutils literal notranslate"><span class="pre">'working_dir'</span></code>. Let’s take a closer look at the content of this folder:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> tree /output/working_dir/preprocWF
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/output/working_dir/preprocWF
├── d3.js
├── graph1.json
├── graph.json
├── index.html
├── mcflirt
│   ├── _0xa5c4a814d227c6af76bc7488d169dc1a.json
│   ├── command.txt
│   ├── _inputs.pklz
│   ├── _node.pklz
│   ├── _report
│   │   └── report.rst
│   ├── result_mcflirt.pklz
│   └── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz
├── selectfiles
│   ├── _0x8be4cb43842af73f06e36ceafabda572.json
│   ├── _inputs.pklz
│   ├── _node.pklz
│   ├── _report
│   │   └── report.rst
│   └── result_selectfiles.pklz
└── smooth
    ├── _0x2745cf755ee377f13be5b3edde9dc7fc.json
    ├── command.txt
    ├── _inputs.pklz
    ├── _node.pklz
    ├── _report
    │   └── report.rst
    ├── result_smooth.pklz
    └── sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz

6 directories, 23 files
</pre></div>
</div>
</div>
</div>
<p>As we can see, there is way too much content that we might not really care about. To relocate and rename all the files that are relevant to you, you can use <code class="docutils literal notranslate"><span class="pre">DataSink</span></code>.</p>
</div>
<div class="section" id="how-to-use-datasink">
<h2>How to use <code class="docutils literal notranslate"><span class="pre">DataSink</span></code><a class="headerlink" href="#how-to-use-datasink" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">DataSink</span></code> is Nipype’s standard output module to restructure your output files. It allows you to relocate and rename files that you deem relevant.</p>
<p>Based on the preprocessing pipeline above, let’s say we want to keep the smoothed functional images as well as the motion correction parameters. To do this, we first need to create the <code class="docutils literal notranslate"><span class="pre">DataSink</span></code> object.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nipype.interfaces.io</span> <span class="kn">import</span> <span class="n">DataSink</span>

<span class="c1"># Create DataSink object</span>
<span class="n">sinker</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">DataSink</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sinker&#39;</span><span class="p">)</span>

<span class="c1"># Name of the output folder</span>
<span class="n">sinker</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_directory</span> <span class="o">=</span> <span class="s1">&#39;/output/working_dir/preprocWF_output&#39;</span>

<span class="c1"># Connect DataSink with the relevant nodes</span>
<span class="n">wf</span><span class="o">.</span><span class="n">connect</span><span class="p">([(</span><span class="n">smooth</span><span class="p">,</span> <span class="n">sinker</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;out_file&#39;</span><span class="p">,</span> <span class="s1">&#39;in_file&#39;</span><span class="p">)]),</span>
            <span class="p">(</span><span class="n">mcflirt</span><span class="p">,</span> <span class="n">sinker</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;mean_img&#39;</span><span class="p">,</span> <span class="s1">&#39;mean_img&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="s1">&#39;par_file&#39;</span><span class="p">,</span> <span class="s1">&#39;par_file&#39;</span><span class="p">)]),</span>
            <span class="p">])</span>
<span class="n">wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>211017-17:07:51,984 nipype.workflow INFO:
	 Workflow preprocWF settings: [&#39;check&#39;, &#39;execution&#39;, &#39;logging&#39;, &#39;monitoring&#39;]
211017-17:07:52,8 nipype.workflow INFO:
	 Running serially.
211017-17:07:52,9 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.selectfiles&quot; in &quot;/output/working_dir/preprocWF/selectfiles&quot;.
211017-17:07:52,18 nipype.workflow INFO:
	 [Node] Running &quot;selectfiles&quot; (&quot;nipype.interfaces.io.SelectFiles&quot;)
211017-17:07:52,27 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.selectfiles&quot;.
211017-17:07:52,28 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.mcflirt&quot; in &quot;/output/working_dir/preprocWF/mcflirt&quot;.
211017-17:07:52,33 nipype.workflow INFO:
	 [Node] Outdated cache found for &quot;preprocWF.mcflirt&quot;.
211017-17:07:52,41 nipype.workflow INFO:
	 [Node] Running &quot;mcflirt&quot; (&quot;nipype.interfaces.fsl.preprocess.MCFLIRT&quot;), a CommandLine Interface with command:
mcflirt -in /data/ds000114/sub-01/ses-test/func/sub-01_ses-test_task-fingerfootlips_bold.nii.gz -meanvol -out /output/working_dir/preprocWF/mcflirt/sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz -plots
211017-17:09:02,448 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.mcflirt&quot;.
211017-17:09:02,451 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.smooth&quot; in &quot;/output/working_dir/preprocWF/smooth&quot;.
211017-17:09:02,455 nipype.workflow INFO:
	 [Node] Outdated cache found for &quot;preprocWF.smooth&quot;.
211017-17:09:02,466 nipype.workflow INFO:
	 [Node] Running &quot;smooth&quot; (&quot;nipype.interfaces.fsl.maths.IsotropicSmooth&quot;), a CommandLine Interface with command:
fslmaths /output/working_dir/preprocWF/mcflirt/sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz -s 1.69864 /output/working_dir/preprocWF/smooth/sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz
211017-17:09:12,962 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.smooth&quot;.
211017-17:09:12,966 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.sinker&quot; in &quot;/output/working_dir/preprocWF/sinker&quot;.
211017-17:09:12,978 nipype.workflow INFO:
	 [Node] Running &quot;sinker&quot; (&quot;nipype.interfaces.io.DataSink&quot;)
211017-17:09:12,987 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.sinker&quot;.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;networkx.classes.digraph.DiGraph at 0x7f6f6efd79d0&gt;
</pre></div>
</div>
</div>
</div>
<p>Let’s take a look at the <code class="docutils literal notranslate"><span class="pre">output</span></code> folder:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> tree /output/working_dir/preprocWF_output
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/output/working_dir/preprocWF_output
├── in_file
│   └── sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz
├── mean_img
│   └── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz_mean_reg.nii.gz
└── par_file
    └── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz.par

3 directories, 3 files
</pre></div>
</div>
</div>
</div>
<p>This looks nice. It is what we asked it to do. But having a specific output folder for each individual output file might be suboptimal. So let’s change the code above to save the output in one folder, which we will call <code class="docutils literal notranslate"><span class="pre">'preproc'</span></code>.</p>
<p>For this we can use the same code as above. We only have to change the connection part:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wf</span><span class="o">.</span><span class="n">connect</span><span class="p">([(</span><span class="n">smooth</span><span class="p">,</span> <span class="n">sinker</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;out_file&#39;</span><span class="p">,</span> <span class="s1">&#39;preproc.@in_file&#39;</span><span class="p">)]),</span>
            <span class="p">(</span><span class="n">mcflirt</span><span class="p">,</span> <span class="n">sinker</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;mean_img&#39;</span><span class="p">,</span> <span class="s1">&#39;preproc.@mean_img&#39;</span><span class="p">),</span>
                               <span class="p">(</span><span class="s1">&#39;par_file&#39;</span><span class="p">,</span> <span class="s1">&#39;preproc.@par_file&#39;</span><span class="p">)]),</span>
            <span class="p">])</span>
<span class="n">wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>211017-17:09:13,789 nipype.workflow INFO:
	 Workflow preprocWF settings: [&#39;check&#39;, &#39;execution&#39;, &#39;logging&#39;, &#39;monitoring&#39;]
211017-17:09:13,811 nipype.workflow INFO:
	 Running serially.
211017-17:09:13,812 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.selectfiles&quot; in &quot;/output/working_dir/preprocWF/selectfiles&quot;.
211017-17:09:13,821 nipype.workflow INFO:
	 [Node] Running &quot;selectfiles&quot; (&quot;nipype.interfaces.io.SelectFiles&quot;)
211017-17:09:13,849 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.selectfiles&quot;.
211017-17:09:13,851 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.mcflirt&quot; in &quot;/output/working_dir/preprocWF/mcflirt&quot;.
211017-17:09:13,857 nipype.workflow INFO:
	 [Node] Cached &quot;preprocWF.mcflirt&quot; - collecting precomputed outputs
211017-17:09:13,857 nipype.workflow INFO:
	 [Node] &quot;preprocWF.mcflirt&quot; found cached.
211017-17:09:13,859 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.smooth&quot; in &quot;/output/working_dir/preprocWF/smooth&quot;.
211017-17:09:13,866 nipype.workflow INFO:
	 [Node] Cached &quot;preprocWF.smooth&quot; - collecting precomputed outputs
211017-17:09:13,867 nipype.workflow INFO:
	 [Node] &quot;preprocWF.smooth&quot; found cached.
211017-17:09:13,869 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.sinker&quot; in &quot;/output/working_dir/preprocWF/sinker&quot;.
211017-17:09:13,878 nipype.workflow INFO:
	 [Node] Outdated cache found for &quot;preprocWF.sinker&quot;.
211017-17:09:13,883 nipype.workflow INFO:
	 [Node] Running &quot;sinker&quot; (&quot;nipype.interfaces.io.DataSink&quot;)
211017-17:09:13,893 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.sinker&quot;.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;networkx.classes.digraph.DiGraph at 0x7f6f6acc31d0&gt;
</pre></div>
</div>
</div>
</div>
<p>Let’s take a look at the new output folder structure:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> tree /output/working_dir/preprocWF_output
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/output/working_dir/preprocWF_output
├── in_file
│   └── sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz
├── mean_img
│   └── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz_mean_reg.nii.gz
├── par_file
│   └── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz.par
└── preproc
    ├── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz_mean_reg.nii.gz
    ├── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz.par
    └── sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz

4 directories, 6 files
</pre></div>
</div>
</div>
</div>
<p>This is already much better. But what if you want to rename the output files to represent something a bit more readable. For this <code class="docutils literal notranslate"><span class="pre">DataSink</span></code> has the <code class="docutils literal notranslate"><span class="pre">substitution</span></code> input field.</p>
<p>For example, let’s assume we want to get rid of the string <code class="docutils literal notranslate"><span class="pre">'task-fingerfootlips'</span></code> and <code class="docutils literal notranslate"><span class="pre">'bold_mcf'</span></code> and that we want to rename the mean file, as well as adapt the file ending of the motion parameter file:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define substitution strings</span>
<span class="n">substitutions</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;_task-fingerfootlips&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                 <span class="p">(</span><span class="s2">&quot;_ses-test&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
                 <span class="p">(</span><span class="s1">&#39;_bold_mcf&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
                 <span class="p">(</span><span class="s1">&#39;.nii.gz_mean_reg&#39;</span><span class="p">,</span> <span class="s1">&#39;_mean&#39;</span><span class="p">),</span>
                 <span class="p">(</span><span class="s1">&#39;.nii.gz.par&#39;</span><span class="p">,</span> <span class="s1">&#39;.par&#39;</span><span class="p">)]</span>

<span class="c1"># Feed the substitution strings to the DataSink node</span>
<span class="n">sinker</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">substitutions</span> <span class="o">=</span> <span class="n">substitutions</span>

<span class="c1"># Run the workflow again with the substitutions in place</span>
<span class="n">wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>211017-17:09:14,534 nipype.workflow INFO:
	 Workflow preprocWF settings: [&#39;check&#39;, &#39;execution&#39;, &#39;logging&#39;, &#39;monitoring&#39;]
211017-17:09:14,545 nipype.workflow INFO:
	 Running serially.
211017-17:09:14,547 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.selectfiles&quot; in &quot;/output/working_dir/preprocWF/selectfiles&quot;.
211017-17:09:14,557 nipype.workflow INFO:
	 [Node] Running &quot;selectfiles&quot; (&quot;nipype.interfaces.io.SelectFiles&quot;)
211017-17:09:14,564 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.selectfiles&quot;.
211017-17:09:14,566 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.mcflirt&quot; in &quot;/output/working_dir/preprocWF/mcflirt&quot;.
211017-17:09:14,576 nipype.workflow INFO:
	 [Node] Cached &quot;preprocWF.mcflirt&quot; - collecting precomputed outputs
211017-17:09:14,577 nipype.workflow INFO:
	 [Node] &quot;preprocWF.mcflirt&quot; found cached.
211017-17:09:14,578 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.smooth&quot; in &quot;/output/working_dir/preprocWF/smooth&quot;.
211017-17:09:14,588 nipype.workflow INFO:
	 [Node] Cached &quot;preprocWF.smooth&quot; - collecting precomputed outputs
211017-17:09:14,590 nipype.workflow INFO:
	 [Node] &quot;preprocWF.smooth&quot; found cached.
211017-17:09:14,592 nipype.workflow INFO:
	 [Node] Setting-up &quot;preprocWF.sinker&quot; in &quot;/output/working_dir/preprocWF/sinker&quot;.
211017-17:09:14,607 nipype.workflow INFO:
	 [Node] Outdated cache found for &quot;preprocWF.sinker&quot;.
211017-17:09:14,613 nipype.workflow INFO:
	 [Node] Running &quot;sinker&quot; (&quot;nipype.interfaces.io.DataSink&quot;)
211017-17:09:14,615 nipype.interface INFO:
	 sub: /output/working_dir/preprocWF_output/in_file/sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz -&gt; /output/working_dir/preprocWF_output/in_file/sub-01_smooth.nii.gz
211017-17:09:14,617 nipype.interface INFO:
	 sub: /output/working_dir/preprocWF_output/preproc/sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz -&gt; /output/working_dir/preprocWF_output/preproc/sub-01_smooth.nii.gz
211017-17:09:14,620 nipype.interface INFO:
	 sub: /output/working_dir/preprocWF_output/mean_img/sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz_mean_reg.nii.gz -&gt; /output/working_dir/preprocWF_output/mean_img/sub-01_mean.nii.gz
211017-17:09:14,623 nipype.interface INFO:
	 sub: /output/working_dir/preprocWF_output/par_file/sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz.par -&gt; /output/working_dir/preprocWF_output/par_file/sub-01.par
211017-17:09:14,625 nipype.interface INFO:
	 sub: /output/working_dir/preprocWF_output/preproc/sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz_mean_reg.nii.gz -&gt; /output/working_dir/preprocWF_output/preproc/sub-01_mean.nii.gz
211017-17:09:14,628 nipype.interface INFO:
	 sub: /output/working_dir/preprocWF_output/preproc/sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz.par -&gt; /output/working_dir/preprocWF_output/preproc/sub-01.par
211017-17:09:14,635 nipype.workflow INFO:
	 [Node] Finished &quot;preprocWF.sinker&quot;.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;networkx.classes.digraph.DiGraph at 0x7f6f6acd76d0&gt;
</pre></div>
</div>
</div>
</div>
<p>Now, let’s take a final look at the output folder:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span> tree /output/working_dir/preprocWF_output
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/output/working_dir/preprocWF_output
├── in_file
│   ├── sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz
│   └── sub-01_smooth.nii.gz
├── mean_img
│   ├── sub-01_mean.nii.gz
│   └── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz_mean_reg.nii.gz
├── par_file
│   ├── sub-01.par
│   └── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz.par
└── preproc
    ├── sub-01_mean.nii.gz
    ├── sub-01.par
    ├── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz_mean_reg.nii.gz
    ├── sub-01_ses-test_task-fingerfootlips_bold_mcf.nii.gz.par
    ├── sub-01_ses-test_task-fingerfootlips_bold_mcf_smooth.nii.gz
    └── sub-01_smooth.nii.gz

4 directories, 12 files
</pre></div>
</div>
</div>
</div>
<p>Cool, much clearer filenames!</p>
<div class="section" id="exercise-1">
<h3>Exercise 1<a class="headerlink" href="#exercise-1" title="Permalink to this headline">¶</a></h3>
<p>Create a simple workflow for skullstriping with FSL, the first node should use <code class="docutils literal notranslate"><span class="pre">BET</span></code> interface and the second node will be a <code class="docutils literal notranslate"><span class="pre">DataSink</span></code>. Test two methods of connecting the nodes and check the content of the output directory.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># write your solution here</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nipype</span> <span class="kn">import</span> <span class="n">Node</span><span class="p">,</span> <span class="n">Workflow</span>
<span class="kn">from</span> <span class="nn">nipype.interfaces.io</span> <span class="kn">import</span> <span class="n">DataSink</span>
<span class="kn">from</span> <span class="nn">nipype.interfaces.fsl</span> <span class="kn">import</span> <span class="n">BET</span>

<span class="c1"># Skullstrip process</span>
<span class="n">ex1_skullstrip</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">BET</span><span class="p">(</span><span class="n">mask</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;ex1_skullstrip&quot;</span><span class="p">)</span>
<span class="n">ex1_skullstrip</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">in_file</span> <span class="o">=</span> <span class="s2">&quot;/data/ds000114/sub-01/ses-test/anat/sub-01_ses-test_T1w.nii.gz&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create DataSink node</span>
<span class="n">ex1_sinker</span> <span class="o">=</span> <span class="n">Node</span><span class="p">(</span><span class="n">DataSink</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;ex1_sinker&#39;</span><span class="p">)</span>
<span class="n">ex1_sinker</span><span class="o">.</span><span class="n">inputs</span><span class="o">.</span><span class="n">base_directory</span> <span class="o">=</span> <span class="s1">&#39;/output/working_dir/ex1_output&#39;</span>

<span class="c1"># and a workflow</span>
<span class="n">ex1_wf</span> <span class="o">=</span> <span class="n">Workflow</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;ex1&quot;</span><span class="p">,</span> <span class="n">base_dir</span> <span class="o">=</span> <span class="s1">&#39;/output/working_dir&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># let&#39;s try the first method of connecting the BET node to the DataSink node</span>
<span class="n">ex1_wf</span><span class="o">.</span><span class="n">connect</span><span class="p">([(</span><span class="n">ex1_skullstrip</span><span class="p">,</span> <span class="n">ex1_sinker</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;mask_file&#39;</span><span class="p">,</span> <span class="s1">&#39;mask_file&#39;</span><span class="p">),</span>
                                              <span class="p">(</span><span class="s1">&#39;out_file&#39;</span><span class="p">,</span> <span class="s1">&#39;out_file&#39;</span><span class="p">)]),</span>
            <span class="p">])</span>
<span class="n">ex1_wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>211017-17:09:15,331 nipype.workflow INFO:
	 Workflow ex1 settings: [&#39;check&#39;, &#39;execution&#39;, &#39;logging&#39;, &#39;monitoring&#39;]
211017-17:09:15,342 nipype.workflow INFO:
	 Running serially.
211017-17:09:15,343 nipype.workflow INFO:
	 [Node] Setting-up &quot;ex1.ex1_skullstrip&quot; in &quot;/output/working_dir/ex1/ex1_skullstrip&quot;.
211017-17:09:15,357 nipype.workflow INFO:
	 [Node] Running &quot;ex1_skullstrip&quot; (&quot;nipype.interfaces.fsl.preprocess.BET&quot;), a CommandLine Interface with command:
bet /data/ds000114/sub-01/ses-test/anat/sub-01_ses-test_T1w.nii.gz /output/working_dir/ex1/ex1_skullstrip/sub-01_ses-test_T1w_brain.nii.gz -m
211017-17:09:19,474 nipype.workflow INFO:
	 [Node] Finished &quot;ex1.ex1_skullstrip&quot;.
211017-17:09:19,476 nipype.workflow INFO:
	 [Node] Setting-up &quot;ex1.ex1_sinker&quot; in &quot;/output/working_dir/ex1/ex1_sinker&quot;.
211017-17:09:19,484 nipype.workflow INFO:
	 [Node] Running &quot;ex1_sinker&quot; (&quot;nipype.interfaces.io.DataSink&quot;)
211017-17:09:19,490 nipype.workflow INFO:
	 [Node] Finished &quot;ex1.ex1_sinker&quot;.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;networkx.classes.digraph.DiGraph at 0x7f6f6ee9c2d0&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># and we can check our sinker directory</span>
<span class="o">!</span> tree /output/working_dir/ex1_output
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/output/working_dir/ex1_output
├── mask_file
│   └── sub-01_ses-test_T1w_brain_mask.nii.gz
└── out_file
    └── sub-01_ses-test_T1w_brain.nii.gz

2 directories, 2 files
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># now we can try the other method of connecting the node to DataSink</span>
<span class="n">ex1_wf</span><span class="o">.</span><span class="n">connect</span><span class="p">([(</span><span class="n">ex1_skullstrip</span><span class="p">,</span> <span class="n">ex1_sinker</span><span class="p">,</span> <span class="p">[(</span><span class="s1">&#39;mask_file&#39;</span><span class="p">,</span> <span class="s1">&#39;bet.@mask_file&#39;</span><span class="p">),</span>
                                              <span class="p">(</span><span class="s1">&#39;out_file&#39;</span><span class="p">,</span> <span class="s1">&#39;bet.@out_file&#39;</span><span class="p">)]),</span>
            <span class="p">])</span>
<span class="n">ex1_wf</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>211017-17:09:20,132 nipype.workflow INFO:
	 Workflow ex1 settings: [&#39;check&#39;, &#39;execution&#39;, &#39;logging&#39;, &#39;monitoring&#39;]
211017-17:09:20,146 nipype.workflow INFO:
	 Running serially.
211017-17:09:20,147 nipype.workflow INFO:
	 [Node] Setting-up &quot;ex1.ex1_skullstrip&quot; in &quot;/output/working_dir/ex1/ex1_skullstrip&quot;.
211017-17:09:20,153 nipype.workflow INFO:
	 [Node] Cached &quot;ex1.ex1_skullstrip&quot; - collecting precomputed outputs
211017-17:09:20,154 nipype.workflow INFO:
	 [Node] &quot;ex1.ex1_skullstrip&quot; found cached.
211017-17:09:20,157 nipype.workflow INFO:
	 [Node] Setting-up &quot;ex1.ex1_sinker&quot; in &quot;/output/working_dir/ex1/ex1_sinker&quot;.
211017-17:09:20,161 nipype.workflow INFO:
	 [Node] Outdated cache found for &quot;ex1.ex1_sinker&quot;.
211017-17:09:20,167 nipype.workflow INFO:
	 [Node] Running &quot;ex1_sinker&quot; (&quot;nipype.interfaces.io.DataSink&quot;)
211017-17:09:20,174 nipype.workflow INFO:
	 [Node] Finished &quot;ex1.ex1_sinker&quot;.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;networkx.classes.digraph.DiGraph at 0x7f6f6b34d610&gt;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># and check the content of the output directory (you should see a new `bet` subdirectory with both files)</span>
<span class="o">!</span> tree /output/working_dir/ex1_output
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/output/working_dir/ex1_output
├── bet
│   ├── sub-01_ses-test_T1w_brain_mask.nii.gz
│   └── sub-01_ses-test_T1w_brain.nii.gz
├── mask_file
│   └── sub-01_ses-test_T1w_brain_mask.nii.gz
└── out_file
    └── sub-01_ses-test_T1w_brain.nii.gz

3 directories, 4 files
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./nipype/notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="basic_data_input_bids.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Data input for BIDS datasets</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="basic_plugins.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Using Nipype Plugins</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Peer Herholz<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>